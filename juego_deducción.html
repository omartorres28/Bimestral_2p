<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Canvas</title>
<style>
body{
     width: 960px;
     margin: 0 auto;
}
h1{
    text-align: center;
}
#miCanvas{
    border:dotted 2px yellow;
    background:green;
}   
</style>
<script>
  /******
  Variables 
  ******/
  var ctx, canvas;
        var colores_array = new Array("yellow", "blue", "red", "purple", "cyan");
        var numColores = colore_array.length;
        var numJugadas = 10;
        var t = 0;
        var tirada, jugada;
        var colorResultado = "Black";
        var colorBoton = "Black";
        var colorContorno = "yellow";
  /******
  Objetos o funciones
  ******/
  function Bolitas(tiro,c1,c2,c3,c4,c5){
    this.tiro = tiro;
    this.bolas ={c1,c2,c3,c4,c5};
    this.w = 30;
    this.margen = 40;
    this.margenRenglon = 12;
    this.x = 100;
    this.y = 35+(this.w+this.margenRenglon)*this.tiro;
    this.r= 15;
    this.xx =this.x-this.r;
    this.yy =this.y-this.r;
    this.lon = this.xx + this.margen * numColores;
    this.dibuja = dibujaBolitas;
    
  }
  function Boton(tiro){
    this.w = 30;
    this.l = 80;
    this.margenRenglon = 12;
    this.x = 300;
    this.y = 40+(this.w+this.margenRenglon)*tiro;
    this.dibuja = dibujaBoton;
  }
  function dibujaBolitas(){
    for(var i=o; i<numColores;i++){
    bolita(this.bolas[i], this.x+this.margen*i,this.y,this.r);
    }
  }
  function bolita(color,x,y,r){
    ctx.save();
    ctx.beginPath();
    if(color==1){
      ctx.fillStyle = "gray";
    } else {
      ctx.fillStyle= colores_array[color];
    }
    ctx.arc(x,y,r,0,2*Math.PI);
    ctx.fill();
    ctx.restore();
  }
  /*****
  Funciones
  *****/
 function dibujaBolitas(){
  ctx.fillStyle = colorBoton;
  ctx.strokeStyle = colorContorno;
ctx.font = "bold 20px Arial";    ctx.fillText("Prueba",this.x, this.y);
 }
 window.onload = function(){
  canvas = document.getElementById("miCanvas");
  if(canvas && canvas.getContext){
    ctx = canvas.getContext("2d");
    if(ctx){
      jugadaa = new Bolitas(99,
      Math.floor(Math.random()*numColores),
       Math.floor(Math.random()*numColores),
       Math.floor(Math.random()*numColores),
       Math.floor(Math.random()*numColores),
      Math.floor(Math.random()*numColores));
      tirada.dibuja();
      boton = new Boton (t);
      boton.dibuja();
      canvas.addEventListener("click",selecciona,false);
    }else {
      alert("Error al crear tu contexto");
  }
  }
 }
 function ajusta(xx,yy){
  var pos = canvas.getBoundingClientRect();
  var x = xx - pos.left;
  var y = yy - pos.top;
  return {x:x,y:y};
 }
 function selecciona(e){
  var pos = ajusta(e.clientX,e.clientY);
  var x = pos.x;     var y = pos.y;

  //
  if((x>tirada.xx)&&(x<tirada.lon)&&
    (y>tirada.yy)&&(y<tirada.yy+tirada.w)){
      for(var i=0; i<numColores;i++){
        xx = tirada.xx+tirada.margen*i;
        if((x > xx)&&(x < xx+tirada.w)){
          break;
        }
      }
      if(i<numColores){
        color = tirada.bolas[i]+1;
        if(color==numColores)color = -1;
        bolita(color,tirada.x+tirada.margen*i,
        tirada.y,tirada.r);
        tirada.bolas[i]= color;
      }
    }else if ((x>boton.x)&&(x<boton.x+boton.l)&&
          (y>boton.y-boton.w/2)&&(y<boton.y+boton.w/2)){
            revisa();

    }
 }
 function revisa();
 var correctas, colores;
 for(var i=0; i<numColores; i++){
  console.log(i+": "+tirada.bolas[i]+","+jugada.bolas[i]);
  if (tirada.bolas[i]==jugasa.bolas[i])correctas++;
 }
 var tiradaLimpio = limpiaArreglo(tirada.bolas);
 var jugadaLimpio = limpiaArreglo(jugada.bolas[i]);
 for (var i=0; i<tiradaLimpio.length;i++){
  
 }

</script>
        
</head>


</html>